## ДЗ №2

1. открыть консоль и зайти по ssh на ВМ
2. открыть вторую консоль и также зайти по ssh на ту же ВМ (можно в докере 2 сеанса)
3. запустить везде psql из под пользователя postgres
4. сделать в первой сессии новую таблицу и наполнить ее данными
```
BEGIN;
CREATE TABLE users(id serial, name text);
INSERT INTO users(name) VALUES ('ivan');
INSERT INTO users(name) VALUES ('vasiliy');
COMMIT;
```

5. посмотреть текущий уровень изоляции:
```
show transaction isolation level;
 transaction_isolation 
-----------------------
 read committed
```
6. начать новую транзакцию в обеих сессиях с дефолтным (не меняя) уровнем
   изоляции
```BEGIN;```
7. в первой сессии добавить новую запись
```
INSERT INTO users(name) VALUES ('piotr');
```
8. сделать запрос на выбор всех записей во второй сессии
```
select * from users;
 id |  name   
----+---------
  1 | ivan
  2 | vasiliy
(2 строки)

```
9. видите ли вы новую запись и если да то почему? После задания можете сверить
   правильный ответ с эталонным (будет доступен после 3 лекции)
> Новой записи не видно, потому что грязное чтение не допускается на уровне read committed
10. завершить транзакцию в первом окне
```
COMMIT;
```
11. сделать запрос на выбор всех записей второй сессии
```
select * from users;
 id |  name   
----+---------
  1 | ivan
  2 | vasiliy
  3 | piotr
(3 строки)
```
12. видите ли вы новую запись и если да то почему?
> Теперь запись видно, потому что неповторяющееся чтение допускается на уровне read committed
13. завершите транзакцию во второй сессии
```
COMMIT;
```
14. начать новые транзакции, но уже на уровне repeatable read в ОБЕИХ сессиях
```
BEGIN transaction isolation level repeatable read;
```
15. в первой сессии добавить новую запись
```
INSERT INTO users(name) VALUES ('gennadiy');
```
16. сделать запрос на выбор всех записей во второй сессии
```
select * from users;
 id |  name   
----+---------
  1 | ivan
  2 | vasiliy
  3 | piotr
(3 строки)

```
17. видите ли вы новую запись и если да то почему?
> Новой записи не видно, потому что грязное чтение не допускается на уровне repeatable read
18. завершить транзакцию в первом окне
```
COMMIT;
```
19. сделать запрос во выбор всех записей второй сессии
```
select * from users;
 id |  name   
----+---------
  1 | ivan
  2 | vasiliy
  3 | piotr
(3 строки)

```
20. видите ли вы новую запись и если да то почему?
> Новой записи не видно, потому что неповторяющееся чтение не допускается на уровне repeatable read